(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(12),r=n.n(a),o=(n(18),n(13)),i=n(7),l=n.n(i),u=n(10),j=n(4),b=(n(20),n(9)),h="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:d},O=function(){return fetch("".concat(h,"/books"),{headers:f}).then((function(e){return e.json()})).then((function(e){return e.books}))},x=function(e,t){return fetch("".concat(h,"/search"),{method:"POST",headers:Object(b.a)(Object(b.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},p=n(5),v=n(1);function k(){return Object(v.jsx)("div",{className:"open-search",children:Object(v.jsx)(p.b,{to:"/search",children:"Add a book"})})}function m(e){var t=e.book,n=Object(c.useContext)(V),s=t.shelf,a=t.imageLinks,r=t.title,o=t.authors,i=Object(c.useRef)(null);return Object(v.jsxs)("div",{className:"book",children:[Object(v.jsxs)("div",{className:"book-top",children:[Object(v.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url('".concat(a&&(a.thumbnail||a.smallThumbnail),"')")}}),Object(v.jsx)("div",{className:"book-shelf-changer",children:Object(v.jsxs)("select",{ref:i,defaultValue:s||"none",onChange:function(){var e=i.current.value;n(t,e)},children:[Object(v.jsx)("option",{disabled:!0,children:"Move to..."}),Object(v.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(v.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(v.jsx)("option",{value:"read",children:"Read"}),Object(v.jsx)("option",{value:"none",children:"None"})]})})]}),Object(v.jsx)("div",{className:"book-title",children:r}),Object(v.jsx)("div",{className:"book-authors",children:o&&o[0]})]})}function N(e){var t=e.title,n=e.shelfValue,c=e.books;return Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:t}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:c.filter((function(e){return e.shelf===n})).map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(m,{book:e})},e.id)}))})})]})}var y=[{title:"Currently Reading",shelfValue:"currentlyReading"},{title:"Want to Read",shelfValue:"wantToRead"},{title:"Read",shelfValue:"read"}];function g(e){var t=e.books;return Object(v.jsxs)("div",{className:"list-books",children:[Object(v.jsx)("div",{className:"list-books-title",children:Object(v.jsx)("h1",{children:"MyReads"})}),Object(v.jsx)("div",{className:"list-books-content",children:Object(v.jsx)("div",{children:y.map((function(e){var n=e.title,c=e.shelfValue;return Object(v.jsx)(N,{title:n,shelfValue:c,books:t},c)}))})}),Object(v.jsx)(k,{})]})}function S(e){var t=e.fetchQueryBooks,n=Object(c.useState)(""),s=Object(j.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){var e=!0;function n(){return(n=Object(u.a)(l.a.mark((function n(){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(a,20);case 2:c=n.sent,e&&(Array.isArray(c)?t(c):t([]));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return a?function(){n.apply(this,arguments)}():t([]),function(){e=!1}}),[a]),Object(v.jsxs)("div",{className:"search-books-bar",children:[Object(v.jsx)(p.b,{to:"/",className:"close-search",children:"Close"}),Object(v.jsx)("div",{className:"search-books-input-wrapper",children:Object(v.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:a,onChange:function(e){r(e.target.value)}})})]})}function R(e){var t=e.fetchedBooks;return Object(v.jsx)("div",{className:"search-books-results",children:Object(v.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(m,{book:e})},e.id)}))})})}function w(e){var t=e.books,n=Object(c.useState)([]),s=Object(j.a)(n,2),a=s[0],r=s[1];return Object(v.jsxs)("div",{className:"search-books",children:[Object(v.jsx)(S,{fetchQueryBooks:function(e){e.forEach((function(e){var n=t.find((function(t){return t.id===e.id}));n&&(e.shelf=n.shelf)})),r(e)}}),Object(v.jsx)(R,{fetchedBooks:a})]})}var C=n(2),V=s.a.createContext({});var B=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=sessionStorage.getItem("books");if(n)try{s(JSON.parse(n))}catch(c){e()}else e()}),[]),Object(c.useEffect)((function(){sessionStorage.setItem("books",JSON.stringify(n))}),[n]),Object(v.jsx)(V.Provider,{value:function(e,t){var c=Object(o.a)(n),a=c.find((function(t){return t.id===e.id}));a?(a.shelf=t,"none"===t&&c.splice(c.indexOf(a),1)):(e.shelf=t,c.push(e)),s(c)},children:Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)(C.c,{children:[Object(v.jsx)(C.a,{path:"/search",element:Object(v.jsx)(w,{books:n})}),Object(v.jsx)(C.a,{path:"/",exact:!0,element:Object(v.jsx)(g,{books:n})}),Object(v.jsx)(C.a,{path:"*",element:Object(v.jsx)("h2",{children:"Not Found"})})]})})})};r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(p.a,{children:Object(v.jsx)(B,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.56c89cc0.chunk.js.map